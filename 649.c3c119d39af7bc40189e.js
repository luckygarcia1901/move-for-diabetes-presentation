(self.webpackChunkmove_for_diabetes=self.webpackChunkmove_for_diabetes||[]).push([[649],{3649:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PatientModule:()=>be});var i=a(9627),n=a(1282),s=a(5959),o=a(5416),r=a(1520),c=a(7368),l=a(1041),d=a(4790);let g=(()=>{class e{constructor(e){this.route=e,this.patientData={}}ngOnInit(){this.route.params.subscribe(e=>{this.patientId=(null==e?void 0:e.patientId)||"2341",this.loadPatientData()})}loadPatientData(){const e=[{id:"2341",name:"Paula",lastName:"Arribas",email:"paulaarribas@gmail.com",image:"https://randomuser.me/api/portraits/women/90.jpg",age:42,weight:62,high:164,imc:34.9,fattyPercent:28,bloodType:"A+",pressure:"120/80",lastControl:"15/01/25"},{id:"2344",name:"Marta",lastName:"Garayoa",email:"martagarayoa@gmail.com",image:"https://randomuser.me/api/portraits/women/48.jpg",age:35,weight:54,high:160,imc:33.9,fattyPercent:26,bloodType:"O+",pressure:"110/70",lastControl:"20/01/25"},{id:"2332",name:"Ane",lastName:"Bertiz",email:"anebertinz@gmail.com",image:"https://randomuser.me/api/portraits/women/44.jpg",age:32,weight:52,high:162,imc:34.9,fattyPercent:25,bloodType:"B+",pressure:"115/75",lastControl:"10/01/25"},{id:"2321",name:"Carlos",lastName:"Unzu\xe9",email:"carlosunzue@gmail.com",image:"https://randomuser.me/api/portraits/men/43.jpg",age:44,weight:72,high:178,imc:44.9,fattyPercent:32,bloodType:"A+",pressure:"130/85",lastControl:"05/01/25"},{id:"2311",name:"Roberto",lastName:"L\xf3pez",email:"robertolopez@gmail.com",image:"https://randomuser.me/api/portraits/men/51.jpg",age:51,weight:85,high:175,imc:27.8,fattyPercent:30,bloodType:"AB+",pressure:"135/88",lastControl:"08/01/25"},{id:"2312",name:"Julia",lastName:"S\xe1nchez",email:"juliasanchez@gmail.com",image:"https://randomuser.me/api/portraits/women/33.jpg",age:34,weight:60,high:167,imc:21.5,fattyPercent:23,bloodType:"O+",pressure:"112/72",lastControl:"12/01/25"},{id:"2302",name:"Carmen",lastName:"Rodr\xedguez",email:"carmenrodriguez@gmail.com",image:"https://randomuser.me/api/portraits/women/52.jpg",age:41,weight:65,high:163,imc:24.5,fattyPercent:27,bloodType:"A+",pressure:"125/82",lastControl:"16/01/25"},{id:"2301",name:"Rafa",lastName:"G\xf3mez",email:"rafagomez@gmail.com",image:"https://randomuser.me/api/portraits/men/45.jpg",age:36,weight:78,high:180,imc:24.1,fattyPercent:21,bloodType:"B+",pressure:"120/80",lastControl:"14/01/25"},{id:"2371",name:"Fernando",lastName:"Mart\xedn",email:"fernandomartin@gmail.com",image:"https://randomuser.me/api/portraits/men/38.jpg",age:43,weight:70,high:174,imc:23.1,fattyPercent:19,bloodType:"O-",pressure:"118/76",lastControl:"19/01/25"}],t=e.find(e=>e.id===this.patientId);this.patientData=t||e[0]}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(n.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-sidebar"]],decls:52,vars:12,consts:[[1,"mfd-patient-sidebar"],[1,"mfd-patient-sidebar-info"],[1,"card","bg-stats","px-2"],[1,"card-body"],[1,"patient-main-info"],[1,"avatar",3,"src"],[1,"patient-name"],[1,"title-4"],[1,"label-mini","fw-medium"],[1,"patient-main-data"],[1,"patient-data"],[1,"caption","fw-semibold"],[1,"caption"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"img",5),c.TgZ(6,"div",6),c.TgZ(7,"span",7),c._uU(8),c.qZA(),c.TgZ(9,"span",8),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",9),c.TgZ(12,"div",10),c.TgZ(13,"span",11),c._uU(14,"Edad"),c.qZA(),c.TgZ(15,"span",12),c._uU(16),c.qZA(),c.qZA(),c.TgZ(17,"div",10),c.TgZ(18,"span",11),c._uU(19,"Peso"),c.qZA(),c.TgZ(20,"span",12),c._uU(21),c.qZA(),c.qZA(),c.TgZ(22,"div",10),c.TgZ(23,"span",11),c._uU(24,"Altura"),c.qZA(),c.TgZ(25,"span",12),c._uU(26),c.qZA(),c.qZA(),c.TgZ(27,"div",10),c.TgZ(28,"span",11),c._uU(29,"IMC"),c.qZA(),c.TgZ(30,"span",12),c._uU(31),c.qZA(),c.qZA(),c.TgZ(32,"div",10),c.TgZ(33,"span",11),c._uU(34,"% Grasa"),c.qZA(),c.TgZ(35,"span",12),c._uU(36),c.qZA(),c.qZA(),c.TgZ(37,"div",10),c.TgZ(38,"span",11),c._uU(39,"Tipo Sangre"),c.qZA(),c.TgZ(40,"span",12),c._uU(41),c.qZA(),c.qZA(),c.TgZ(42,"div",10),c.TgZ(43,"span",11),c._uU(44,"Presi\xf3n"),c.qZA(),c.TgZ(45,"span",12),c._uU(46),c.qZA(),c.qZA(),c.TgZ(47,"div",10),c.TgZ(48,"span",11),c._uU(49,"\xdaltimo Control"),c.qZA(),c.TgZ(50,"span",12),c._uU(51),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("src",t.patientData.image,c.LSH),c.xp6(3),c.AsE("",t.patientData.name," ",t.patientData.lastName,""),c.xp6(2),c.Oqu(t.patientData.email),c.xp6(6),c.hij("",t.patientData.age," a\xf1os"),c.xp6(5),c.hij("",t.patientData.weight," kg"),c.xp6(5),c.hij("",t.patientData.high," cm"),c.xp6(5),c.Oqu(t.patientData.imc),c.xp6(5),c.hij("",t.patientData.fattyPercent,"%"),c.xp6(5),c.Oqu(t.patientData.bloodType),c.xp6(5),c.Oqu(t.patientData.pressure),c.xp6(5),c.Oqu(t.patientData.lastControl))},encapsulation:2}),e})(),p=(()=>{class e{constructor(e,t,a){this.store=e,this.route=t,this.patientsService=a,this.destroy=new s.xQ}ngOnInit(){this.route.params.pipe((0,o.R)(this.destroy)).subscribe(e=>{this.patientId=null==e?void 0:e.patientId,this.loadPatient()})}ngOnDestroy(){this.destroy.next(),this.destroy.complete(),this.patientsService.deleteSelectedPatient()}loadPatient(){this.store.showLoading(),this.patientsService.getPatient(this.patientId).pipe((0,r.x)(()=>this.store.hideLoading()),(0,o.R)(this.destroy)).subscribe({next:e=>{this.store.set("selectedPatient",e)},error:e=>{console.error("Error al cargar el paciente:",e)}})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d),c.Y36(n.gz),c.Y36(d.$))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-main-page"]],decls:6,vars:0,consts:[[1,"mfd-container-xxl"],[1,"row","g-4"],[1,"col-lg-4","col-md-12"],[1,"col-lg-8","col-md-12"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"mfd-patient-sidebar"),c.qZA(),c.TgZ(4,"div",3),c._UZ(5,"router-outlet"),c.qZA(),c.qZA(),c.qZA())},directives:[g,n.lC],encapsulation:2}),e})();var m=a(4092),u=a(649);let Z=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.store.set("headerPage","search")}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-home-page"]],decls:57,vars:12,consts:[[1,"row","g-4"],[1,"col-12","col-xl-6"],[1,"card","h-100","shadow-sm","border-0"],[1,"card-body","d-flex","flex-column","justify-content-between","p-4"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"card-title","mb-1"],[1,"card-text","text-muted","mb-0","fw-semibold"],[1,"btn","btn-sm","btn-outline-primary","rounded-circle","p-2"],["src","assets/icons/ic-open-graph.svg","width","16","height","16"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-center"],["chartType","dough"],["src","/assets/images/home1.png",1,"img-fluid",2,"max-height","120px","object-fit","contain"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div"),c.TgZ(6,"h5",5),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"p",6),c._uU(10,"1500 kCal"),c.qZA(),c.qZA(),c.TgZ(11,"button",7),c._UZ(12,"img",8),c.qZA(),c.qZA(),c.TgZ(13,"div",9),c._UZ(14,"mfd-chart",10),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",1),c.TgZ(16,"div",2),c.TgZ(17,"div",3),c.TgZ(18,"div",4),c.TgZ(19,"div"),c.TgZ(20,"h5",5),c._uU(21),c.ALo(22,"translate"),c.qZA(),c.TgZ(23,"p",6),c._uU(24,"650 kCal"),c.qZA(),c.qZA(),c.TgZ(25,"button",7),c._UZ(26,"img",8),c.qZA(),c.qZA(),c.TgZ(27,"div",9),c._UZ(28,"mfd-chart"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"div",1),c.TgZ(30,"div",2),c.TgZ(31,"div",3),c.TgZ(32,"div",4),c.TgZ(33,"div"),c.TgZ(34,"h5",5),c._uU(35),c.ALo(36,"translate"),c.qZA(),c.TgZ(37,"p",6),c._uU(38,"Metformina 50mg"),c.qZA(),c.qZA(),c.TgZ(39,"button",7),c._UZ(40,"img",8),c.qZA(),c.qZA(),c.TgZ(41,"div",9),c._UZ(42,"img",11),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(43,"div",1),c.TgZ(44,"div",2),c.TgZ(45,"div",3),c.TgZ(46,"div",4),c.TgZ(47,"div"),c.TgZ(48,"h5",5),c._uU(49),c.ALo(50,"translate"),c.qZA(),c.TgZ(51,"p",6),c._uU(52,"125 mg/dl"),c.qZA(),c.qZA(),c.TgZ(53,"button",7),c._UZ(54,"img",8),c.qZA(),c.qZA(),c.TgZ(55,"div",9),c._UZ(56,"mfd-chart"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Oqu(c.lcZ(8,4,"PATIENT.NUTRITION")),c.xp6(14),c.Oqu(c.lcZ(22,6,"PATIENT.PHYSICAL_ACTIVITY")),c.xp6(14),c.Oqu(c.lcZ(36,8,"PATIENT.TREATMENT")),c.xp6(14),c.Oqu(c.lcZ(50,10,"PATIENT.BLOOD_GLUCOSE_CONTROL")))},directives:[m.x],pipes:[u.X$],encapsulation:2}),e})();var h=a(3835),v=a(4019),f=a(2728),A=a(4689),b=a(3865),T=a(1116);function q(e,t){1&e&&(c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"p"),c._uU(3,"El paciente a\xfan no ha iniciado conversaciones"),c.qZA(),c.qZA(),c.qZA())}let y=(()=>{class e{constructor(e,t){this.store=e,this.mfdCometChatService=t,this.showChat=!1,this.noOpenGroups=!1,this.destroy=new s.xQ}ngOnInit(){this.store.set("headerPage",{title:"PATIENTS.CHAT",backRoute:"back"}),this.store.showLoading(),this.store.select("selectedPatient").pipe((0,o.R)(this.destroy),(0,h.h)(Boolean),(0,v.b)(e=>this.patient=e),(0,f.M)(this.store.select("user")),(0,A.w)(([e,t])=>this.mfdCometChatService.getCometChatGroupsByPatient(e,t))).subscribe(e=>{e.some(e=>e.open)?(this.showChat=!0,this.noOpenGroups=!1):(this.noOpenGroups=!0,this.showChat=!1),this.store.hideLoading()})}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d),c.Y36(b.K))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-chat-page"]],decls:1,vars:1,consts:[["class","responsive-cometchat",4,"ngIf"],[1,"responsive-cometchat"],[1,"no-open-chat"]],template:function(e,t){1&e&&c.YNc(0,q,4,0,"div",0),2&e&&c.Q6J("ngIf",t.noOpenGroups)},directives:[T.O5],styles:[".chat-groups-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:8px}.chat-groups-container[_ngcontent-%COMP%]   .mine[_ngcontent-%COMP%]{flex:1}.chat-groups-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:4px}.responsive-cometchat[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 165px);background-color:#fff}.no-open-chat[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.no-open-chat[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;width:50%;color:var(--grey);font-size:16px}@media (max-width:991.98px){.responsive-cometchat[_ngcontent-%COMP%]{height:calc(100vh - 400px)}}"]}),e})();var x=a(3148),O=a(9764),_=a(436),w=a(3982),U=a(9996),C=a(2023),I=a(4991),S=a(7768),P=a(6541);function L(e,t,a){return 0===a?[t]:(e.push(t),e)}function N(){return function(e,t){return arguments.length>=2?function(a){return(0,P.z)((0,C.R)(e,t),(0,I.h)(1),(0,S.d)(t))(a)}:function(t){return(0,P.z)((0,C.R)((t,a,i)=>e(t,a,i+1)),(0,I.h)(1))(t)}}(L,[])}var j=a(878),D=a(6511),M=a(1614),E=a(2693);let R=(()=>{class e{constructor(e){this.http=e,this.requests={}}getRequest(e){if(this.requests[e])return(0,j.of)(this.requests[e]);const t=e.substring(1);return this.http.get(t,{context:(0,D.h)(M.B.back)}).pipe((0,v.b)(t=>{this.requests=Object.assign(Object.assign({},this.requests),{[e]:t})}))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(E.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Y=(()=>{class e{constructor(e,t){this.http=e,this.store=t}getAllStats(e){return(0,x.D)([this.getBioStats(e),this.getVitalStats(e),this.getPhysicalConditionStats(e)])}getBioStats(e){const t=`api/v1/patients/${e}/bio-data-stats/`,a=(0,D.h)(M.B.back);return(0,x.D)([this.http.get(t+"daily",{context:a}),this.http.get(t+"weekly",{context:a}),this.http.get(t+"quarterly",{context:a})]).pipe((0,U.U)(e=>({daily:e[0].length?e[0][0]:null,weekly:e[1].length?e[1][0]:null,quarterly:e[2].length?e[2][0]:null})))}getVitalStats(e){return this.http.get(`api/v1/patients/${e}/quiz-results`,{context:(0,D.h)(M.B.back)})}getPhysicalConditionStats(e){return this.http.get(`api/v1/patients/${e}/profile/test-results`,{context:(0,D.h)(M.B.back)})}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(E.eN),c.LFG(l.d))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function k(e,t){if(1&e&&(c.TgZ(0,"div",3),c.TgZ(1,"div",4),c.TgZ(2,"div",0),c.TgZ(3,"div",5),c.TgZ(4,"span",6),c._uU(5),c.qZA(),c.TgZ(6,"span",7),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"span",9),c._uU(11),c.qZA(),c.TgZ(12,"span",7),c._uU(13),c.ALo(14,"date"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(5),c.Oqu(null==e?null:e.testInfo.testName),c.xp6(2),c.AsE("",c.lcZ(8,5,"RANGE_LABELS.RECOMMENDED"),": ",null==e?null:e.testInfo.recommendedRange,""),c.xp6(4),c.Oqu(e.lastResult),c.xp6(2),c.Oqu(c.xi3(14,7,e.date,"d MMMM, YYYY HH:mm"))}}let B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-physical-condition-card"]],inputs:{data:"data"},decls:3,vars:1,consts:[[1,"row"],[1,"col-12"],["class","card card-white mb-4",4,"ngFor","ngForOf"],[1,"card","card-white","mb-4"],[1,"card-header","title-2"],[1,"col-8","d-flex","flex-column","justify-content-center"],[1,"title-2","fw-medium"],[1,"caption","fw-medium","text-grey"],[1,"col-4","d-flex","flex-column","align-items-end","justify-content-end"],[1,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,k,15,10,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.data))},directives:[T.sg],pipes:[u.X$,T.uU],encapsulation:2}),e})(),z=(()=>{class e{constructor(){this.activeCategory="daily"}changeCategory(e){this.activeCategory=e}getData(e){const t={1:{key:"averageGlucose",decimal:1},2:{key:"averageBasalGlucose",decimal:1},3:{key:"averageHbac1",decimal:1},4:{key:"averageHypoglycaemia",decimal:0}}[e];let a=null;try{a=this.data[this.activeCategory][t.key]}catch(i){a=0}return a?a.toFixed(t.decimal):t.decimal?"0.0":"0"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-biochemistry-card"]],inputs:{data:"data"},decls:47,vars:10,consts:[[1,"row"],[1,"col-12"],[1,"mfd-plan-option-slide"],[1,"btn","btn-pinkish-grey","rounded-big","p-lg-3",3,"click"],[1,"card","card-white","mb-4"],[1,"card-header","title-2"],[1,"col-8","d-flex","flex-column","justify-content-center"],[1,"title-2","fw-medium"],[1,"col-4","d-flex","flex-column","align-items-end","justify-content-end"],[1,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"button",3),c.NdJ("click",function(){return t.changeCategory("daily")}),c._uU(4," Hoy "),c.qZA(),c.TgZ(5,"button",3),c.NdJ("click",function(){return t.changeCategory("weekly")}),c._uU(6," Semana "),c.qZA(),c.TgZ(7,"button",3),c.NdJ("click",function(){return t.changeCategory("quarterly")}),c._uU(8," Trimestre "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",0),c.TgZ(10,"div",1),c.TgZ(11,"div",4),c.TgZ(12,"div",5),c.TgZ(13,"div",0),c.TgZ(14,"div",6),c.TgZ(15,"span",7),c._uU(16,"Glucosa media"),c.qZA(),c.qZA(),c.TgZ(17,"div",8),c.TgZ(18,"span",9),c._uU(19),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",4),c.TgZ(21,"div",5),c.TgZ(22,"div",0),c.TgZ(23,"div",6),c.TgZ(24,"span",7),c._uU(25,"Glucosa basal media"),c.qZA(),c.qZA(),c.TgZ(26,"div",8),c.TgZ(27,"span",9),c._uU(28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"div",4),c.TgZ(30,"div",5),c.TgZ(31,"div",0),c.TgZ(32,"div",6),c.TgZ(33,"span",7),c._uU(34,"Hba1c"),c.qZA(),c.qZA(),c.TgZ(35,"div",8),c.TgZ(36,"span",9),c._uU(37),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"div",4),c.TgZ(39,"div",5),c.TgZ(40,"div",0),c.TgZ(41,"div",6),c.TgZ(42,"span",7),c._uU(43,"Hipoglucemias"),c.qZA(),c.qZA(),c.TgZ(44,"div",8),c.TgZ(45,"span",9),c._uU(46),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.ekj("active","daily"===t.activeCategory),c.xp6(2),c.ekj("active","weekly"===t.activeCategory),c.xp6(2),c.ekj("active","quarterly"===t.activeCategory),c.xp6(12),c.Oqu(t.getData(1)),c.xp6(9),c.Oqu(t.getData(2)),c.xp6(9),c.Oqu(t.getData(3)),c.xp6(9),c.Oqu(t.getData(4)))},encapsulation:2}),e})();var $=a(2628);const G=[{name:"kCal",min:0,max:1e3,value:602,reverse:!1,labels:[]},{name:"Km",min:0,max:10,value:6,reverse:!1,labels:[]},{name:"Pasos",min:0,max:1e4,value:9020,reverse:!1,labels:[]}],J=[{name:"Adiro 100mg",min:0,max:100,value:100,valueLabel:"%",reverse:!1,labels:[]},{name:"Metformina 50mg",min:0,max:10,value:5,reverse:!1,labels:[]},{name:"Atorbastatina 20mg",min:0,max:1e4,value:9020,reverse:!1,labels:[]}],F=[{name:"%Graso",min:21,max:33,value:20,reverse:!1,labels:["Bajo","Bien","Alto","Muy alto"]},{name:"Condici\xf3n cardiovascular",min:6,max:10,value:7,reverse:!1,labels:["Excelente","Muy bien","Bien","Pobre","Muy pobre"]},{name:"Musculatura fijadora",min:1,max:2,valueLabel:"min",value:1,reverse:!0,labels:["Muy pobre","Pobre","Bien","Muy bien","Excelente"]},{name:"Fuerza tren superior",min:24,max:34,value:25,reverse:!0,labels:["Muy pobre","Pobre","Bien","Muy bien","Excelente"]},{name:"Fuerza tren inferior",min:24,max:34,value:25,reverse:!0,labels:["Muy pobre","Pobre","Bien","Muy bien","Excelente"]}],Q=["Bajo","Recomendado","Alto","Muy alto"],H=[{name:"Glucosa basal en ayunas",min:0,max:110,value:100,reverse:!1,labels:Q},{name:"Glucosa postprandial",min:0,max:150,value:100,reverse:!1,labels:Q},{name:"Glucosa pre entrenamiento",min:0,max:110,value:100,reverse:!1,labels:Q},{name:"Glucosa post entrenamiento",min:0,max:110,value:100,reverse:!1,labels:Q},{name:"HbA1c",min:0,max:7,value:6,reverse:!1,labels:Q},{name:"Registro Hipoglucemias",min:0,max:10,value:6,reverse:!1,labels:Q}],X=[{name:"Edad metab\xf3lica",min:0,max:100,value:39,reverse:!1,labels:Q},{name:"Edad cardiovascular",min:0,max:100,value:50,reverse:!1,labels:Q},{name:"Estr\xe9s",min:0,max:110,value:100,valueLabel:"%",reverse:!1,labels:Q},{name:"Sue\xf1o",min:0,max:10,value:8,valueLabel:"h",reverse:!1,labels:Q},{name:"\xcdndice calidad vida",min:0,max:10,value:8,reverse:!1,labels:Q}];let V=(()=>{class e{constructor(e,t,a){this.http=e,this.store=t,this.translate=a}getPatientActivity(){const e=G.map(e=>Object.assign(Object.assign({},e),{name:this.getIndicatorName(e.name),labels:this.getRangeLabels(e.labels),value:K(e.min,e.max)}));return(0,j.of)(e).pipe((0,$.g)(700))}getPatientMedication(){const e=J.map(e=>Object.assign(Object.assign({},e),{name:this.getIndicatorName(e.name),labels:this.getRangeLabels(e.labels),value:K(e.min,e.max)}));return(0,j.of)(e).pipe((0,$.g)(700))}getPatientVitalStatus(){const e=X.map(e=>Object.assign(Object.assign({},e),{name:this.getIndicatorName(e.name),labels:this.getRangeLabels(e.labels),value:K(e.min,e.max)}));return(0,j.of)(e).pipe((0,$.g)(700))}getPatientPhysicalCondition(){const e=F.map(e=>Object.assign(Object.assign({},e),{name:this.getIndicatorName(e.name),labels:this.getRangeLabels(e.labels),value:K(e.min,e.max)}));return(0,j.of)(e).pipe((0,$.g)(700))}getPatientBiochemistry(){const e=H.map(e=>Object.assign(Object.assign({},e),{name:this.getIndicatorName(e.name),labels:this.getRangeLabels(e.labels),value:K(e.min,e.max)}));return(0,j.of)(e).pipe((0,$.g)(700))}getIndicatorName(e){return`INDICATORS.${W(e)}`}getRangeLabels(e){return e.map(e=>`RANGE_LABELS.${W(e)}`)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(E.eN),c.LFG(l.d),c.LFG(u.sK))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function K(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function W(e){return(t=e,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).split(" ").join("_").toUpperCase();var t}var ee=a(9441);function te(e,t){1&e&&(c.TgZ(0,"div",3),c._uU(1,"loading..."),c.qZA())}function ae(e,t){if(1&e&&(c.TgZ(0,"div",4),c._UZ(1,"mfd-chart-progress-bar",5),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("title",e.name)("recommended",e.recommendedLabel)("value",e.value)("positionDot",e.position)("reverse",e.reverse)("labels",e.labels)("blue",!0)}}let ie=(()=>{class e{constructor(e,t,a){this.store=e,this.patientDataService=t,this.translate=a,this.loading=!1}ngOnInit(){this.patient$=this.store.select("selectedPatient"),this.loadData()}loadData(){this.loading=!0,this.data$=this.patientDataService.getPatientActivity().pipe((0,r.x)(()=>this.loading=!1),(0,U.U)(e=>e.map(e=>Object.assign(Object.assign({},e),{recommendedLabel:this.getRecommendedLabel(e),position:ne(e)}))))}getRecommendedLabel(e){return`${this.translate.instant("RANGE_LABELS.OBJECTIVE")}: ${e.max} ${(null==e?void 0:e.valueLabel)||""}`}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d),c.Y36(V),c.Y36(u.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-activity-card"]],decls:4,vars:4,consts:[["class","loading text-center py-4",4,"ngIf"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"loading","text-center","py-4"],[1,"col-12"],[3,"title","recommended","value","positionDot","reverse","labels","blue"]],template:function(e,t){1&e&&(c.YNc(0,te,2,0,"div",0),c.TgZ(1,"div",1),c.YNc(2,ae,2,7,"div",2),c.ALo(3,"async"),c.qZA()),2&e&&(c.Q6J("ngIf",t.loading),c.xp6(2),c.Q6J("ngForOf",c.lcZ(3,2,t.data$)))},directives:[T.O5,T.sg,ee.M],pipes:[T.Ov],encapsulation:2}),e})();function ne(e){let t=100*(e.value-e.min)/(e.max-e.min);return 100===t&&(t=97),`${t}`}function se(e,t){1&e&&(c.TgZ(0,"div",3),c._uU(1,"cargando..."),c.qZA())}function oe(e,t){if(1&e&&(c.TgZ(0,"div",4),c._UZ(1,"mfd-chart-progress-bar",5),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Q6J("title",e.name)("recommended",e.recommendedLabel)("value",e.value+"%")("positionDot",e.position)("reverse",e.reverse)("labels",e.labels)("blue",!0)}}let re=(()=>{class e{constructor(e,t,a){this.store=e,this.patientDataService=t,this.translate=a,this.loading=!1}ngOnInit(){this.patient$=this.store.select("selectedPatient"),this.loadData()}loadData(){this.loading=!0,this.data$=this.patientDataService.getPatientMedication().pipe((0,r.x)(()=>this.loading=!1),(0,U.U)(e=>e.map(e=>Object.assign(Object.assign({},e),{recommendedLabel:this.getRecommendedLabel(e),position:ce(e)}))))}getRecommendedLabel(e){return`${this.translate.instant("RANGE_LABELS.OBJECTIVE")}: ${e.max} ${(null==e?void 0:e.valueLabel)||""}`}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d),c.Y36(V),c.Y36(u.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-medication-card"]],decls:4,vars:4,consts:[["class","loading text-center py-4",4,"ngIf"],[1,"row"],["class","col-12",4,"ngFor","ngForOf"],[1,"loading","text-center","py-4"],[1,"col-12"],[3,"title","recommended","value","positionDot","reverse","labels","blue"]],template:function(e,t){1&e&&(c.YNc(0,se,2,0,"div",0),c.TgZ(1,"div",1),c.YNc(2,oe,2,7,"div",2),c.ALo(3,"async"),c.qZA()),2&e&&(c.Q6J("ngIf",t.loading),c.xp6(2),c.Q6J("ngForOf",c.lcZ(3,2,t.data$)))},directives:[T.O5,T.sg,ee.M],pipes:[T.Ov],encapsulation:2}),e})();function ce(e){let t=100*(e.value-e.min)/(e.max-e.min);return 100===t&&(t=97),`${t}`}function le(e,t){if(1&e&&(c.TgZ(0,"div",3),c.TgZ(1,"div",4),c.TgZ(2,"div",0),c.TgZ(3,"div",5),c.TgZ(4,"span",6),c._uU(5),c.qZA(),c.TgZ(6,"span",7),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"span",9),c._uU(11),c.qZA(),c.TgZ(12,"span",7),c._uU(13),c.ALo(14,"date"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(5),c.Oqu(null==e?null:e.quizInfo.testName),c.xp6(2),c.AsE("",c.lcZ(8,5,"RANGE_LABELS.RECOMMENDED"),": ",null==e?null:e.quizInfo.recommendedRange,""),c.xp6(4),c.Oqu(e.score),c.xp6(2),c.Oqu(c.xi3(14,7,e.date,"d MMMM, YYYY HH:mm"))}}let de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-vital-status-card"]],inputs:{data:"data"},decls:3,vars:1,consts:[[1,"row"],[1,"col-12"],["class","card card-white mb-4",4,"ngFor","ngForOf"],[1,"card","card-white","mb-4"],[1,"card-header","title-2"],[1,"col-8","d-flex","flex-column","justify-content-center"],[1,"title-2","fw-medium"],[1,"caption","fw-medium","text-grey"],[1,"col-4","d-flex","flex-column","align-items-end","justify-content-end"],[1,"label"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,le,15,10,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.data))},directives:[T.sg],pipes:[u.X$,T.uU],encapsulation:2}),e})();function ge(e,t){if(1&e&&c._UZ(0,"mfd-physical-condition-card",16),2&e){const e=c.oxw(2);c.Q6J("data",e.physicalConditionResults)}}function pe(e,t){if(1&e&&c._UZ(0,"mfd-biochemistry-card",16),2&e){const e=c.oxw(2);c.Q6J("data",e.bioResults)}}function me(e,t){1&e&&c._UZ(0,"mfd-activity-card")}function ue(e,t){1&e&&c._UZ(0,"mfd-medication-card")}function Ze(e,t){if(1&e&&c._UZ(0,"mfd-vital-status-card",16),2&e){const e=c.oxw(2);c.Q6J("data",e.vitalResults)}}function he(e,t){if(1&e&&(c.TgZ(0,"div",8),c.TgZ(1,"h2",9),c.TgZ(2,"button",10),c._UZ(3,"img",11),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.qZA(),c.TgZ(6,"div",12),c.TgZ(7,"div",13),c.YNc(8,ge,1,1,"mfd-physical-condition-card",14),c.YNc(9,pe,1,1,"mfd-biochemistry-card",14),c.YNc(10,me,1,0,"mfd-activity-card",15),c.YNc(11,ue,1,0,"mfd-medication-card",15),c.YNc(12,Ze,1,1,"mfd-vital-status-card",14),c.qZA(),c.qZA(),c.qZA()),2&e){const e=t.$implicit,a=t.index;c.xp6(1),c.Q6J("id",a),c.xp6(1),c.uIk("data-bs-target","#"+e.id)("aria-controls",e.id),c.xp6(1),c.Q6J("src","assets/icons/"+e.image,c.LSH),c.xp6(1),c.hij(" ",c.lcZ(5,12,e.name)," "),c.xp6(2),c.s9C("id",e.id),c.uIk("aria-labelledby",a),c.xp6(2),c.Q6J("ngIf","physical_condition"===e.id),c.xp6(1),c.Q6J("ngIf","biochemistry"===e.id),c.xp6(1),c.Q6J("ngIf","activity"===e.id||"nutrition"===e.id),c.xp6(1),c.Q6J("ngIf","medication"===e.id),c.xp6(1),c.Q6J("ngIf","vital_status"===e.id)}}function ve(e){return e.sort((e,t)=>{const a=new Date(e.date).getTime();return new Date(t.date).getTime()-a})}const fe=[{path:"",component:p,children:[{path:"",component:Z},{path:"chat",component:y},{path:"stats",component:(()=>{class e{constructor(e,t,a){this.store=e,this.cacheService=t,this.patientStatsService=a,this.categories=[{name:"PATIENTS.PHYSICAL_CONDITION",id:"physical_condition",image:"ic-physical-condition-big.svg"},{name:"PATIENTS.BIOCHEMISTRY",id:"biochemistry",image:"ic-biochemistry-big.svg"},{name:"PATIENTS.VITAL_ESTATUS",id:"vital_status",image:"ic-vital-status-big.svg"}],this.loading=!1,this.date=new Date,this.destroy=new s.xQ}ngOnInit(){this.store.set("headerPage",{title:"PATIENTS.STATISTICS",backRoute:"back"}),this.store.select("selectedPatient").pipe((0,o.R)(this.destroy)).subscribe(e=>{e&&(this.patient=e,this.loadStats())})}ngOnDestroy(){this.destroy.next(),this.destroy.complete()}loadStats(){this.store.showLoading(),(0,x.D)([this.physicalConditionSource(),this.vitalSource(),this.patientStatsService.getBioStats(this.patient.id)]).pipe((0,r.x)(()=>this.store.hideLoading())).subscribe(e=>{this.physicalConditionResults=ve(e[0]),this.vitalResults=ve(e[1]),this.bioResults=e[2]})}physicalConditionSource(){return this.patientStatsService.getPhysicalConditionStats(this.patient.id).pipe((0,_.b)(e=>(0,O.D)(e)),(0,w.zg)(e=>this.cacheService.getRequest(e.test).pipe((0,U.U)(t=>Object.assign(Object.assign({},e),{testInfo:t}))),1),N())}vitalSource(){return this.patientStatsService.getVitalStats(this.patient.id).pipe((0,_.b)(e=>(0,O.D)(e)),(0,w.zg)(e=>this.cacheService.getRequest(e.quiz).pipe((0,U.U)(t=>Object.assign(Object.assign({},e),{quizInfo:t}))),1),N())}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.d),c.Y36(R),c.Y36(Y))},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-stats-page"]],decls:11,vars:4,consts:[[1,"card","card-full"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"title-6"],[1,"row","pt-3"],["id","accordionStats",1,"accordion"],["class","accordion-item mb-3",4,"ngFor","ngForOf"],[1,"accordion-item","mb-3"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","fw-medium"],[1,"me-4",3,"src"],["data-bs-parent","#accordionStats",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[3,"data",4,"ngIf"],[4,"ngIf"],[3,"data"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"span",4),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",3),c.TgZ(9,"div",6),c.YNc(10,he,13,14,"div",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Oqu(c.lcZ(6,2,"PATIENTS.STATISTICS")),c.xp6(5),c.Q6J("ngForOf",t.categories))},directives:[T.sg,T.O5,B,z,ie,re,de],pipes:[u.X$],encapsulation:2}),e})()},{path:"calendar",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["mfd-patient-calendar-page"]],decls:5,vars:3,consts:[[1,"available-soon"],["src","/assets/images/cohete.png"],[1,"banner"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"img",1),c.TgZ(2,"div",2),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,1,"COMMON.AVAILABLE_SOON")))},pipes:[u.X$],encapsulation:2}),e})()},{path:"week-program",loadChildren:()=>a.e(852).then(a.bind(a,8852)).then(e=>e.WeekProgramModule)}]}];let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.Bz.forChild(fe)],n.Bz]}),e})(),be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[],imports:[[i.m,Ae]]}),e})()}}]);