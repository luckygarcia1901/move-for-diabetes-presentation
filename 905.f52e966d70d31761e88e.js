(self.webpackChunkmove_for_diabetes=self.webpackChunkmove_for_diabetes||[]).push([[905],{2905:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ProfileModule:()=>w});var o=r(9627),i=r(1282),a=r(96),s=r(7368),l=r(2935),n=r(878),c=r(4689),u=r(6511),d=r(1614),p=r(2693),m=r(3141);let Z=(()=>{class t{constructor(t,e){this.http=t,this.auth=e}updateProfile(t){return this.http.put(`api/v1/users/${t.id}`,t,{context:(0,u.h)(d.B.back)}).pipe((0,c.w)(t=>this.auth.saveUser(t)))}changePassword(t,e){return(0,n.of)(!0)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(p.eN),s.LFG(m.e))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var f=r(8922),h=r(286),g=r(1116),A=r(2520),q=r(649);function b(t,e){if(1&t&&(s.TgZ(0,"form",8),s.TgZ(1,"div",9),s.TgZ(2,"div",10),s.TgZ(3,"label",11),s._uU(4),s.ALo(5,"translate"),s.qZA(),s._UZ(6,"input",12),s.qZA(),s.TgZ(7,"div",10),s.TgZ(8,"label",11),s._uU(9),s.ALo(10,"translate"),s.qZA(),s._UZ(11,"input",13),s.qZA(),s.TgZ(12,"div",10),s.TgZ(13,"label",11),s._uU(14),s.ALo(15,"translate"),s.qZA(),s._UZ(16,"input",14),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.Q6J("formGroup",t.form),s.xp6(4),s.Oqu(s.lcZ(5,4,"PROFILE.OLD_PASSWORD")),s.xp6(5),s.Oqu(s.lcZ(10,6,"PROFILE.NEW_PASSWORD")),s.xp6(5),s.Oqu(s.lcZ(15,8,"PROFILE.REPEAT_PASSWORD"))}}let v=(()=>{class t{constructor(t,e,r,o,i){this.dialogRef=t,this.profileService=e,this.fb=r,this.toast=o,this.themeService=i}ngOnInit(){this.createForm()}close(){this.dialogRef.close()}submit(){if(this.form.valid){const t=this.form.value;this.profileService.changePassword(t.currentPassword,t.password).subscribe(t=>{t?(this.toast.success("Se ha actualizado la contrase\xf1a correctamente"),this.close()):this.toast.error("Error al actualizar la contrase\xf1a")})}}getRouteIcon(t){return this.themeService.getRouteIcon(t)}createForm(){this.form=this.fb.group({currentPassword:["",a.kI.required],password:["",a.kI.required],repeatPassword:["",a.kI.required]},{validators:[t=>{const e=t.get("password"),r=t.get("repeatPassword");return e&&r?r.errors&&!r.errors.confirmedValidator?null:e.value!==r.value?(r.setErrors({confirmedValidator:!0}),{confirmedValidator:!0}):null:null}]})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(l.so),s.Y36(Z),s.Y36(a.qu),s.Y36(f.k),s.Y36(h.f))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mfd-change-password-dialog"]],decls:13,vars:9,consts:[["mat-dialog-title","",1,"d-flex","justify-content-between","align-items-center"],[1,"title-6"],[1,"btn","btn-icon","only-icon",3,"click"],[3,"src"],[3,"formGroup",4,"ngIf"],["mat-dialog-actions","",1,"row","mt-4"],[1,"col-12","d-flex","justify-content-center"],[1,"btn","btn-primary","px-5",3,"disabled","click"],[3,"formGroup"],[1,"row"],[1,"col-12","mb-3"],[1,"form-label"],["formControlName","currentPassword","type","password",1,"form-control","bg-light"],["formControlName","password","type","password",1,"form-control","bg-light"],["formControlName","repeatPassword","type","password",1,"form-control","bg-light"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h2",1),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"button",2),s.NdJ("click",function(){return e.close()}),s._UZ(5,"img",3),s.qZA(),s.qZA(),s.TgZ(6,"mat-dialog-content"),s.YNc(7,b,17,10,"form",4),s.qZA(),s.TgZ(8,"div",5),s.TgZ(9,"div",6),s.TgZ(10,"button",7),s.NdJ("click",function(){return e.submit()}),s._uU(11),s.ALo(12,"translate"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Oqu(s.lcZ(3,5,"PROFILE.CHANGE_PASSWORD")),s.xp6(3),s.Q6J("src",e.getRouteIcon("ic-close"),s.LSH),s.xp6(2),s.Q6J("ngIf",e.form),s.xp6(3),s.Q6J("disabled",e.form.invalid),s.xp6(1),s.hij(" ",s.lcZ(12,7,"COMMON.CHANGE")," "))},directives:[l.uh,l.xY,g.O5,l.H8,a._Y,a.JL,a.sg,A.kH,a.Fj,a.JJ,a.u],pipes:[q.X$],encapsulation:2}),t})();var O=r(1520),T=r(1041);function x(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"form",2),s.TgZ(1,"div",3),s.TgZ(2,"div",4),s.TgZ(3,"label",5),s._uU(4),s.ALo(5,"translate"),s.qZA(),s._UZ(6,"input",6),s.qZA(),s.TgZ(7,"div",4),s.TgZ(8,"label",5),s._uU(9),s.ALo(10,"translate"),s.qZA(),s._UZ(11,"input",7),s.qZA(),s.TgZ(12,"div",4),s.TgZ(13,"label",5),s._uU(14),s.ALo(15,"translate"),s.qZA(),s._UZ(16,"input",8),s.qZA(),s.TgZ(17,"div",4),s.TgZ(18,"label",5),s._uU(19),s.ALo(20,"translate"),s.qZA(),s.TgZ(21,"div",3),s.TgZ(22,"div",9),s._UZ(23,"input",10),s.qZA(),s.TgZ(24,"div",11),s.TgZ(25,"button",12),s.NdJ("click",function(){return s.CHM(t),s.oxw().openChangePassword()}),s._uU(26),s.ALo(27,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(28,"div",4),s.TgZ(29,"label",5),s._uU(30),s.ALo(31,"translate"),s.qZA(),s._UZ(32,"input",13),s.qZA(),s.TgZ(33,"div",4),s.TgZ(34,"label",5),s._uU(35),s.ALo(36,"translate"),s.qZA(),s._UZ(37,"input",14),s.qZA(),s.TgZ(38,"div",4),s.TgZ(39,"label",5),s._uU(40),s.ALo(41,"translate"),s.qZA(),s._UZ(42,"input",15),s.qZA(),s.TgZ(43,"div",4),s.TgZ(44,"label",5),s._uU(45),s.ALo(46,"translate"),s.qZA(),s._UZ(47,"input",16),s.qZA(),s.TgZ(48,"div",4),s.TgZ(49,"label",5),s._uU(50),s.ALo(51,"translate"),s.qZA(),s._UZ(52,"input",17),s.qZA(),s.TgZ(53,"div",4),s.TgZ(54,"label",5),s._uU(55),s.ALo(56,"translate"),s.qZA(),s._UZ(57,"input",18),s.qZA(),s.TgZ(58,"div",19),s.TgZ(59,"button",20),s.NdJ("click",function(){return s.CHM(t),s.oxw().submit()}),s._uU(60),s.ALo(61,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.form),s.xp6(4),s.Oqu(s.lcZ(5,14,"PROFILE.NAME")),s.xp6(5),s.Oqu(s.lcZ(10,16,"PROFILE.SURNAME")),s.xp6(5),s.Oqu(s.lcZ(15,18,"PROFILE.USERNAME")),s.xp6(5),s.Oqu(s.lcZ(20,20,"PROFILE.PASSWORD")),s.xp6(7),s.hij(" ",s.lcZ(27,22,"COMMON.CHANGE")," "),s.xp6(4),s.Oqu(s.lcZ(31,24,"PROFILE.DATE_OF_BIRTH")),s.xp6(5),s.Oqu(s.lcZ(36,26,"PROFILE.EMAIL")),s.xp6(5),s.Oqu(s.lcZ(41,28,"PROFILE.ADDRESS")),s.xp6(5),s.Oqu(s.lcZ(46,30,"PROFILE.TOWN")),s.xp6(5),s.Oqu(s.lcZ(51,32,"PROFILE.PHONE")),s.xp6(5),s.Oqu(s.lcZ(56,34,"PROFILE.COMPANY_NAME")),s.xp6(4),s.Q6J("disabled",t.form.invalid),s.xp6(1),s.hij(" ",s.lcZ(61,36,"COMMON.SAVE")," ")}}const _=[{path:"",component:(()=>{class t{constructor(t,e,r,o,i){this.store=t,this.fb=e,this.profileService=r,this.dialog=o,this.themeService=i}ngOnInit(){this.store.set("headerPage",{title:"PROFILE.MY_PROFILE",backRoute:"/"}),this.store.select("user").subscribe(t=>{this.user=t,this.createForm()})}openChangePassword(){this.dialog.open(v,{width:this.themeService.widthModal})}submit(){if(this.form.invalid)return;const t=this.form.value;this.store.showLoading(),this.profileService.updateProfile(t).pipe((0,O.x)(()=>this.store.hideLoading())).subscribe()}createForm(){this.form||(this.form=this.fb.group({id:[this.user.id,a.kI.required],firstName:[this.user.firstName,a.kI.required],lastName:[this.user.lastName,a.kI.required],username:[this.user.username,a.kI.required],birthday:[""],email:[this.user.email,a.kI.required],direction:[""],city:[""],phone:[""],company:[""]}))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(T.d),s.Y36(a.qu),s.Y36(Z),s.Y36(l.uw),s.Y36(h.f))},t.\u0275cmp=s.Xpm({type:t,selectors:[["fdx-profile-page"]],decls:2,vars:1,consts:[[1,"mfd-container-xxl"],["errorTailor","",3,"formGroup",4,"ngIf"],["errorTailor","",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6","mb-3"],[1,"form-label"],["formControlName","firstName","placeholder","","type","text",1,"form-control"],["formControlName","lastName","placeholder","","type","text",1,"form-control"],["formControlName","username","placeholder","","type","text",1,"form-control"],[1,"col-8"],["type","password","placeholder","","readonly","",1,"form-control","bg-light"],[1,"col-4","d-flex","justify-content-end"],["disabled","",1,"btn","btn-primary","px-5",3,"click"],["formControlName","birthday","type","date",1,"form-control"],["formControlName","email","placeholder","","type","text",1,"form-control"],["formControlName","direction","placeholder","","type","text",1,"form-control"],["formControlName","city","placeholder","","type","text",1,"form-control"],["formControlName","phone","placeholder","","type","text",1,"form-control"],["formControlName","company","type","text",1,"form-control"],[1,"col-12","d-flex","justify-content-center","mt-4"],[1,"btn","btn-primary","px-5",3,"disabled","click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,x,62,38,"form",1),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",e.form))},directives:[g.O5,a._Y,a.JL,A.m6,a.sg,A.kH,a.Fj,a.JJ,a.u],pipes:[q.X$],encapsulation:2}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.Bz.forChild(_)],i.Bz]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[Z],imports:[[o.m,L]]}),t})()}}]);